---
#
# vagrant.yml
#
- hosts: vagrant
  become: yes
  tasks:
    # common
    - name: install modules
      yum: >
        name={{ item }}
        state=present
      with_items:
        - fish
        - git
        - vim

    # TODO: chsh zsh
    - name: change default shell
      user: >
        name=vagrant
        shell=/usr/bin/fish

    - name: make dein.vim directory
      file:
        path: /home/.vim/dein/repos/github.com/Shougo/dein.vim
        owner: vagrant
        state: directory
        recurse: yes

    - name: install dein.vim
      git:
        repo: "https://github.com/Shougo/dein.vim.git"
        dest: /home/.vim/dein/repos/github.com/Shougo/dein.vim

    # TODO: git clone dotsfile
    - name: make directory
      file:
        path: "/home/vagrant/dev/src/github.com/rusagedougawa/dotfiles"
        owner: vagrant
        state: directory
        recurse: yes

    - name: install dot files
      git:
        repo: "https://github.com/rusagedougawa/dotfiles.git"
        dest: /home/vagrant/dev/src/github.com/rusagedougawa/dotfiles

    - name: link dotfiles
      file:
        src: "/home/vagrant/dotfiles/{{ item.src }}"
        dest: "/home/vagrant/{{ item.dest }}"
        state: link
      with_items:
        - { src: ".vimrc", dest: ".vimrc" }

    - name: make vim.dein directory
      file:
        dest: "/home/vagrant/.vim/dein/repos/github.com/Shougo/dein.vim"
        owner: vagrant
        state: directory
        recurse: yes

    - name: install vim.dein
      git:
        repo: "https://github.com/Shougo/dein.vim.git"
        dest: /home/vagrant/.vim/dein/repos/github.com/Shougo/dein.vim
